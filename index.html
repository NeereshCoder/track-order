<script>
function processTracking() {
    const docket = document.getElementById("docketNo").value.trim();
    const courier = document.getElementById("courier").value;
    const frame = document.getElementById("trackingFrame");
    const fallback = document.getElementById("fallback-message");
    const externalLink = document.getElementById("externalLink");

    if (!docket || !courier) return alert("Fill all fields");

    let url = "";

    // Couriers that block iframe embedding
    const blocksIframe = ["delhivery", "amazon", "xpressbees", "goswift"];

    switch (courier) {
        case "xpressbees":
            url = `https://www.xpressbees.com/shipment/tracking?awbNo=${docket}`;
            break;
        case "delhivery":
            url = `https://www.delhivery.com/track-v2/package/${docket}`;
            break;
        case "dtdc":
            url = `https://txk.dtdc.com/ctbs-tracking/customerInterface.tr?submitName=showCITrackingDetails&cType=Consignment&cnNo=${docket}`;
            break;
        case "amazon":
            url = `https://track.amazon.in/tracking/${docket}`;
            break;
        case "goswift":
            url = `https://www.trackingmore.com/goswift-tracking?trackingNumber=${docket}`;
            break;
    }

    if (blocksIframe.includes(courier)) {
        frame.style.display = "none";
        fallback.style.display = "flex";
        externalLink.href = url;
        window.open(url, "_blank");
    } else {
        fallback.style.display = "none";
        frame.style.display = "block";
        frame.src = url;
    }
}
</script>
